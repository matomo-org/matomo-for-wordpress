(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue")):"function"===typeof define&&define.amd?define(["CoreHome"],t):"object"===typeof exports?exports["Live"]=t(require("CoreHome"),require("vue")):e["Live"]=t(e["CoreHome"],e["Vue"])})("undefined"!==typeof self?self:this,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/Live/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"LiveWidgetRefresh",(function(){return c})),n.d(t,"TotalVisitors",(function(){return k})),n.d(t,"LivePage",(function(){return U})),n.d(t,"IndexHeader",(function(){return q})),n.d(t,"LastVisits",(function(){return $})),"undefined"!==typeof window){var r=window.document.currentScript,o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var i=n("19dc"),l=window,a=l.$,c={mounted:function(e,t){setTimeout((function(){var n=i["MatomoUrl"].parsed.value.segment;a(e).find("#visitsLive").liveWidget({interval:t.value.liveRefreshAfterMs,onUpdate:function(){i["AjaxHelper"].fetch({module:"Live",action:"ajaxTotalVisitors",segment:n},{format:"html"}).then((function(t){i["Matomo"].helper.destroyVueComponent(e),a(e).find("#visitsTotal").replaceWith(t),i["Matomo"].helper.compileVueEntryComponents(e)}))},maxRows:10,fadeInSpeed:600,dataUrlParams:{module:"Live",action:"getLastVisitsStart",segment:n}})}))}},s=n("8bbf"),u={class:"dataTable",cellspacing:"0"},d={id:"label",class:"sortable label first",style:{cursor:"auto"}},b={class:"thDIV"},f={class:"sortable",style:{cursor:"auto"}},m={class:"thDIV"},v={class:"sortable",style:{cursor:"auto"}},p={class:"thDIV"},j={class:""},O={class:"label column"},g=["title"],y=["title"],V={class:""},h={class:"label column"},E=["title"],N=["title"];function C(e,t,n,r,o,i){return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["createElementVNode"])("table",u,[Object(s["createElementVNode"])("thead",null,[Object(s["createElementVNode"])("tr",null,[Object(s["createElementVNode"])("th",d,[Object(s["createElementVNode"])("div",b,Object(s["toDisplayString"])(e.translate("General_Date")),1)]),Object(s["createElementVNode"])("th",f,[Object(s["createElementVNode"])("div",m,Object(s["toDisplayString"])(e.translate("General_ColumnNbVisits")),1)]),Object(s["createElementVNode"])("th",v,[Object(s["createElementVNode"])("div",p,Object(s["toDisplayString"])(e.translate("General_Actions")),1)])])]),Object(s["createElementVNode"])("tbody",null,[Object(s["createElementVNode"])("tr",j,[Object(s["createElementVNode"])("td",O,Object(s["toDisplayString"])(e.translate("Live_LastHours",24)),1),Object(s["createElementVNode"])("td",{class:"column",title:e.countErrorToday},Object(s["toDisplayString"])(e.visitorsCountToday||0),9,g),Object(s["createElementVNode"])("td",{class:"column",title:e.countErrorToday},Object(s["toDisplayString"])(e.pisToday||0),9,y)]),Object(s["createElementVNode"])("tr",V,[Object(s["createElementVNode"])("td",h,Object(s["toDisplayString"])(e.translate("Live_LastMinutes",30)),1),Object(s["createElementVNode"])("td",{class:"column",title:e.countErrorHalfHour},Object(s["toDisplayString"])(e.visitorsCountHalfHour||0),9,E),Object(s["createElementVNode"])("td",{class:"column",title:e.countErrorHalfHour},Object(s["toDisplayString"])(e.pisHalfhour||0),9,N)])])])])}var L=Object(s["defineComponent"])({props:{countErrorToday:Number,visitorsCountToday:Number,pisToday:Number,countErrorHalfHour:Number,visitorsCountHalfHour:Number,pisHalfhour:Number}});L.render=C;var k=L,w={class:"visitsLiveFooter"},S=["title"],H=Object(s["createElementVNode"])("img",{id:"pauseImage",border:"0",src:"plugins/Live/images/pause.png"},null,-1),T=[H],_=["title"],D=Object(s["createElementVNode"])("img",{id:"playImage",style:{display:"none"},border:"0",src:"plugins/Live/images/play.png"},null,-1),P=[D],x={key:0},B=Object(s["createTextVNode"])(" Â  "),M=["href"];function I(e,t,n,r,o,i){var l=Object(s["resolveComponent"])("VueEntryContainer"),a=Object(s["resolveDirective"])("live-widget-refresh");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(e.isWidgetized?"Passthrough":"ContentBlock"),{"content-title":e.isWidgetized?void 0:e.translate("Live_VisitorsInRealTime")},{default:Object(s["withCtx"])((function(){return[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(l,{html:e.initialTotalVisitors},null,8,["html"]),Object(s["createVNode"])(l,{html:e.visitors},null,8,["html"])],512),[[a,{liveRefreshAfterMs:e.liveRefreshAfterMs}]]),Object(s["createElementVNode"])("div",w,[Object(s["createElementVNode"])("a",{title:e.translate("Live_OnClickPause",e.translate("Live_VisitorsInRealTime")),onClick:t[0]||(t[0]=Object(s["withModifiers"])((function(t){return e.onClickPause()}),["prevent"]))},T,8,S),Object(s["createElementVNode"])("a",{title:e.translate("Live_OnClickStart",e.translate("Live_VisitorsInRealTime")),onClick:t[1]||(t[1]=function(t){e.onClickPlay()})},P,8,_),e.disableLink?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",x,[B,Object(s["createElementVNode"])("a",{class:"rightLink",href:e.visitorLogUrl},Object(s["toDisplayString"])(e.translate("Live_LinkVisitorLog")),9,M)]))])]})),_:1},8,["content-title"]))])}var R=Object(s["defineComponent"])({props:{disableLink:Boolean,visitors:String,initialTotalVisitors:String,liveRefreshAfterMs:Number,isWidgetized:Boolean},components:{TotalVisitors:k,VueEntryContainer:i["VueEntryContainer"],ContentBlock:i["ContentBlock"],Passthrough:i["Passthrough"]},directives:{LiveWidgetRefresh:c},computed:{visitorLogUrl:function(){return"#?".concat(i["MatomoUrl"].stringify(Object.assign(Object.assign({},i["MatomoUrl"].hashParsed.value),{},{category:"General_Visitors",subcategory:"Live_VisitorLog"})))}},methods:{onClickPause:function(){window.onClickPause()},onClickPlay:function(){window.onClickPlay()}}});R.render=I;var U=R;function W(e,t,n,r,o,i){var l=Object(s["resolveComponent"])("EnrichedHeadline"),a=Object(s["resolveDirective"])("content-intro");return Object(s["withDirectives"])((Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["createElementVNode"])("h2",null,[Object(s["createVNode"])(l,null,{default:Object(s["withCtx"])((function(){return[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("Live_VisitorLog")),1)]})),_:1})])],512)),[[a]])}var A=Object(s["defineComponent"])({components:{EnrichedHeadline:i["EnrichedHeadline"]},directives:{ContentIntro:i["ContentIntro"]}});A.render=W;var q=A,z=window,G=z.$,$={mounted:function(e){G(e).on("click",".visits-live-launch-visitor-profile",(function(e){return e.preventDefault(),window.broadcast.propagateNewPopoverParameter("visitorProfile",G(this).attr("data-visitor-id")),!1})).tooltip({track:!0,content:function(){var e=G(this).attr("title")||"";return window.vueSanitize(e.replace(/\n/g,"<br />"))},show:{delay:100,duration:0},hide:!1})}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=Live.umd.min.js.map